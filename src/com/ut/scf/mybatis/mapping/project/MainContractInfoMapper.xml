<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ut.scf.dao.project.IMainContractInfoDao">
  <resultMap id="BaseResultMap" type="com.ut.scf.pojo.auto.ContractMain">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue May 23 13:36:14 CST 2017.
    -->
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="contract_name" jdbcType="VARCHAR" property="contractName" />
    <result column="contract_num" jdbcType="VARCHAR" property="contractNum" />
    <result column="typeid" jdbcType="VARCHAR" property="typeid" />
    <result column="amount" jdbcType="DECIMAL" property="amount" />
    <result column="end_date" jdbcType="VARCHAR" property="endDate" />
    <result column="cteate_time" jdbcType="VARCHAR" property="createTime" />
    <result column="rzhgz" jdbcType="VARCHAR" property="rzhgz" />
    <result column="fkhgz" jdbcType="VARCHAR" property="fkhgz" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="file_id" jdbcType="VARCHAR" property="fileId" />
    <result column="file_url" jdbcType="VARCHAR" property="fileUrl" />
  </resultMap>
 

<!-- 查询统计新需求 -->
<select id="getContractList" resultType="hashmap" parameterType="hashmap" >
	SELECT contract.id,contract.contract_name contractName,contract.contract_num contractNum,contract.create_time createTime, 
		contract.end_date endDate,contract.amount ,contract.file_id fileId,contract.file_url fileUrl,contract.rzhgz,contract.fkhgz,contract.typeid,  
		typ.type_name typeName 
		 FROM contract_main contract  
		LEFT JOIN business_type_info typ ON typ.type_id=contract.typeid  
		WHERE contract.status = 0 
		<if test="contractNum != null and contractNum != ''">
		    and contract.contract_num LIKE CONCAT(CONCAT('%', #{contractNum}),'%')
		</if> 
	    <if test="typeid != null and typeid != ''">
		    and contract.typeid LIKE CONCAT(CONCAT('%', #{typeid}),'%')
		</if> 
		 <if test="status != null and status != ''">
		    and contract.status LIKE CONCAT(CONCAT('%', #{status}),'%')
		</if> 
</select>

<select id="selectByContractNum" parameterType="com.ut.scf.pojo.auto.ContractMain" resultMap="BaseResultMap">
    select * from contract_main    
	where status = 0 
    <if test="contractNum != null">
      and contract_num = #{contractNum,jdbcType=VARCHAR}  
    </if>
    <if test="rzhgz != null">
      and rzhgz = #{rzhgz,jdbcType=VARCHAR}  
    </if>
    <if test="fkhgz != null">
      and fkhgz = #{fkhgz,jdbcType=VARCHAR}  
    </if>
    
  </select>

<select id="getMainContractList" resultType="hashmap"  >
	SELECT contract.id,contract.contract_name contractName,contract.contract_num contractNum,contract.create_time createTime, 
		contract.end_date endDate,contract.amount ,contract.file_id fileId,contract.file_url fileUrl,contract.rzhgz,contract.fkhgz,contract.typeid,  
		typ.type_name typeName 
		 FROM contract_main contract  
		LEFT JOIN business_type_info typ ON typ.type_id=contract.typeid  
		WHERE contract.status = 0 
</select>

<insert id="insert" parameterType="com.ut.scf.pojo.auto.ContractMain" >
		insert into contract_main 
		<trim prefix="(" suffix=")" suffixOverrides="," >
			<if test="id != null" >id,</if>
			<if test="contractName != null" >contract_name,</if>
			<if test="contractNum != null" >contract_num,</if>
			<if test="typeid != null" >typeid,</if>
			<if test="amount != null" >amount,</if>
			<if test="endDate != null" >end_date,</if>
			<if test="createTime != null" >create_time,</if>
			<if test="rzhgz != null" >rzhgz,</if>
			<if test="fkhgz != null" >fkhgz,</if>
			<if test="status != null" >status,</if>
			<if test="fileId != null" >file_id,</if>
			<if test="fileUrl != null" >file_url,</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides="," >
			<if test="id != null" >#{id,jdbcType=VARCHAR},</if>
			<if test="contractName != null" >#{contractName,jdbcType=VARCHAR},</if>
			<if test="contractNum != null" >#{contractNum,jdbcType=VARCHAR},</if>
			<if test="typeid != null" >#{typeid,jdbcType=VARCHAR},</if>
			<if test="amount != null" >#{amount,jdbcType=DECIMAL},</if>
			<if test="endDate != null" >#{endDate,jdbcType=VARCHAR},</if>
			<if test="createTime != null" >#{createTime,jdbcType=VARCHAR},</if>
			<if test="rzhgz != null" >#{rzhgz,jdbcType=VARCHAR},</if>
			<if test="fkhgz != null" >#{fkhgz,jdbcType=VARCHAR},</if>
			<if test="status != null" >#{status,jdbcType=INTEGER},</if>
			<if test="fileId != null" >#{fileId,jdbcType=VARCHAR},</if>
			<if test="fileUrl != null" >#{fileUrl,jdbcType=VARCHAR},</if>
		</trim>
	</insert>
</mapper>